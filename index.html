<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <title>TaskPlus</title>
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "SF Pro Text", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        font-weight: 500; /* Medium */
    }
    body {
        background-color: #E0DDF2;
        min-height: 100vh;
        overflow: hidden;
    }
    header {
        position: fixed;
        top: 0; left: 0; right: 0;
        height: 75px;
        background: #ffffff;
        box-shadow: 0 5px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding: 0 16px;
        z-index: 10;
        margin-left: 250px; /* Match sidebar width */
    }
    .header-left {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-left: 270px; /* Match sidebar width */
    }
    .header-left img {
        height: 40px;
        width: auto;
    }
    .action-panel {
        display: flex;
        gap: 10px;
    }
    .action-button {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        border: none;
        border-radius: 6px;
        background-color: #E0DDF2;
        color: #000;
        font-size: 16px;
        font-weight: 540;
        cursor: pointer;
        transition: 0.3s;
    }
    .action-button:hover {
        background-color: #E0DDF2;
        color: #4417DD;
    }
    .action-button svg {
        width: 16px;
        height: 16px;
    }
    .sidebar {
        position: fixed;
        top: 0; left: 0;
        height: 100vh;
        width: 250px;
        background: #ffffff;
        box-shadow: 5px 0 4px rgba(0, 0, 0, 0.1);
        z-index: 20;
    }
    .sidebar-logo {
        padding: 16px;
        border-bottom: 1px solid #E0DDF2;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .sidebar-logo img {
        height: 40px;
        width: auto;
        max-width: 150px;
    }
    .sidebar nav {
        padding: 24px 16px;
    }
    .sidebar ul {
        list-style: none;
    }
    .sidebar li:not(:last-child) {
        margin-bottom: 16px;
    }
    .sidebar a {
        display: block;
        padding: 8px 16px;
        text-decoration: none;
        color: #000000;
        border-radius: 6px;
        transition: background 0.3s;
    }
    .sidebar a:hover {
        background-color: #E0DDF2;
        color: #4417DD;
    }
    h1 {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 16px;
        color: #1f2937;
    }
    p {
        margin-bottom: 24px;
        color: #4b5563;
    }
    .sidebar a:hover,
    .sidebar a.active {
        background-color: #E0DDF2;
        color: #4417DD;
    }
    .modal {
        position: fixed;
        inset: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 30;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .modal-content {
        background: #fff;
        width: 90%;
        max-width: 900px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
    }
    .modal-header {
        background-color: #E0DDF2;
        padding: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .modal-header h2 {
        font-size: 20px;
    }
    .close-button {
        background: transparent;
        border: none;
        font-size: 24px;
        cursor: pointer;
    }
    .modal-body {
        padding: 20px;
        flex: 1;
        overflow-y: auto;
    }
    .modal-footer {
        padding: 16px;
        background-color: #F9F9F9;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        border-top: 1px solid #ddd;
        margin-top: auto;
    }
    .form-btn {
        background-color: #4417DD;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
    }
    .form-btn.secondary {
        background-color: #ccc;
        color: #000;
    }
    .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
    }
    .form-group {
        display: flex;
        flex-direction: column;
    }
    .form-group.tall {
    grid-row: span 2;
    }
    .form-group.full {
        grid-column: span 2;
    }
   .form-group label {
        margin-bottom: 6px;
        font-size: 14px;
        color: #374151;
        text-align: left;
    }
    input, select, textarea {
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
    }
    textarea {
        resize: vertical;
    }
    .priority-options {
        display: flex;
        gap: 16px;
    }
    .priority-cards {
        display: flex;
        gap: 12px;
        height: 46px;
    }
    /* Each card */
    /* Default style for unselected cards */
.priority-card {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    border: 2px solid #ccc;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    opacity: 0.5;
    background-color: #fff;
}

/* Show icons and text properly */
.priority-card i {
    margin-right: 6px;
}

/* Hide radio button */
.priority-card input {
    display: none;
}

/* Highlight selected card */
.priority-card:has(input:checked) {
    opacity: 1;
    color: white;
}

/* Specific styles */
.priority-card.high:has(input:checked) {
    background-color: #f0dcdc;
    border-color: rgb(247, 58, 58);
}

.priority-card.medium:has(input:checked) {
    background-color: #faefe7; 
    border-color:rgb(255,127,35);
}

.priority-card.low:has(input:checked) {
    background-color: #e2f5e8;
    border-color: rgb(40,167,69);
}
.input-style {
  border: 1px solid #ccc;
  border-radius: 0.375rem;
  padding: 0.4rem 0.6rem;
  background-color: white;
}
.w-20 {
  width: 5rem;
}
.data-container {
    margin-top: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    max-height: calc(100vh - 140px);
    overflow-y: hidden;
    overflow-x: hidden;
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
}

.data-container:hover {
    overflow-y: auto;
    overflow-x: hidden;
}

.data-container::-webkit-scrollbar {
    width: 0 !important;
    display: none !important;
}

.data-container:hover::-webkit-scrollbar {
    width: 6px !important;
    display: block !important;
}

.data-container:hover::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.data-container:hover::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 3px;
}

.data-container:hover::-webkit-scrollbar-thumb:hover {
    background: #555;
}

.data-row {
    display: grid;
    grid-template-columns: 150px 150px 150px 200px 100px 150px 150px 150px 100px 100px 100px 150px;
    border-bottom: 1px solid #dee2e6;
    width: 100%;
    min-width: 100%;
    max-width: 100%;
}

.data-header {
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
}

.data-row {
    display: grid;
    grid-template-columns: 200px 200px 200px 250px 150px 200px 200px 200px 150px 150px 150px 200px;
    border-bottom: 1px solid #dee2e6;
    min-width: fit-content;
}

.data-cell {
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 4px;
    border-right: 1px solid #dee2e6;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 13px;
}

.data-cell:last-child {
    border-right: none;
}

.data-row:hover {
    background-color: #f8f9fa;
}

.no-data {
    padding: 40px;
    text-align: center;
    color: #666;
    font-size: 16px;
    background: white;
}

.action-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    justify-content: flex-end;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    background-color: #f0f0f0;
    color: #666;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.action-btn:hover {
    background-color: #e0e0e0;
}

.action-btn i {
    font-size: 16px;
}

.data-header .data-row {
    font-weight: 600;
}

.data-container .data-row:not(.data-header .data-row):not(.filter-row .data-row) {
    font-weight: 400;
    color: #666;
    font-size: 13px;
}

.data-container .data-row:not(.data-header .data-row):not(.filter-row .data-row) .priority-tag {
    opacity: 0.85;
}

.data-header {
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
}

.data-header .data-cell {
    border-right: 1px solid #dee2e6;
    font-size: 15px;
    font-weight: 600;
}

.filter-row .data-cell {
    padding: 8px 1px;
    font-size: 14px;
}

.filter-input {
    width: 100%;
    padding: 4px 8px 4px 32px;
    border: none;
    border-radius: 4px;
    font-size: 13px;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="%23999" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>') no-repeat 12px center;
    background-size: 14px;
    transition: all 0.2s ease;
    margin: 0;
    color: #666;
    font-weight: 400;
}

.filter-input:focus {
    outline: none;
    background-color: rgba(224, 221, 242, 0.1);
}

input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #E0DDF2;
    box-shadow: 0 0 0 3px rgba(224, 221, 242, 0.25);
}

.filter-input::placeholder {
    color: #999;
    font-weight: 400;
}

.sort-icon {
    color: #999;
    cursor: pointer;
}

.sort-icon:hover {
    color: #333;
}

.priority-tag {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.priority-high {
    background-color: #fde8e8;
    color: #e53e3e;
}

.priority-medium {
    background-color: #faefe7;
    color: #ff7f23;
}

.priority-low {
    background-color: #e2f5e8;
    color: #28a745;
}

.task-count {
    position: fixed;
    bottom: 0;
    left: 255px;
    padding: 10px 20px;
    border-top: 1px solid #dee2e6;
    color: #000;
    font-size: 14px;
    z-index: 10;
    font-weight: normal;
}

#taskContainer {
    margin: 90px 20px 40px 270px;
    height: calc(100vh - 130px);
    overflow-x: auto;
    overflow-y: hidden;
}

.data-container {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    height: 100%;
    display: flex;
    flex-direction: column;
    min-width: fit-content;
}

.data-content {
    flex: 1;
    overflow: hidden;
    position: relative;
}

.data-row {
    display: grid;
    grid-template-columns: 200px 200px 200px 250px 150px 200px 200px 200px 150px 150px 150px 200px;
    border-bottom: 1px solid #dee2e6;
    min-width: fit-content;
}

.data-cell {
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 4px;
    border-right: 1px solid #dee2e6;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 13px;
}

.filter-row .data-cell {
    padding: 8px 1px;
}

.data-header {
    position: sticky;
    top: 0;
    background: #f8f9fa;
    z-index: 1;
}

.filter-row {
    position: sticky;
    top: 43px;
    background: white;
    z-index: 1;
}

.no-data {
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    padding: 20px;
    text-align: center;
    color: #666;
    font-size: 16px;
}

.data-content:hover {
    overflow-y: auto;
}

/* Hide scrollbar for Chrome, Safari and Opera */
.data-content::-webkit-scrollbar {
    width: 8px;
}

.data-content::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.data-content::-webkit-scrollbar-thumb {
    background: #E0DDF2;
    border-radius: 4px;
}

.data-content::-webkit-scrollbar-thumb:hover {
    background: #4417DD;
}

.data-content::-webkit-scrollbar-corner {
    background: #f1f1f1;
}

/* Hide scrollbar for IE, Edge and Firefox */
.data-content {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}

.data-content:hover {
    -ms-overflow-style: auto;  /* IE and Edge */
    scrollbar-width: thin;  /* Firefox */
}

/* Add this CSS for selected row */
.data-row.selected {
    background-color: #E0DDF2;
}

.data-row.selected .data-cell {
    border-right: 1px solid #dee2e6;
    border-bottom: 1px solid #dee2e6;
    border-top: 1px solid #dee2e6;
    border-left: 1px solid #dee2e6;
}

.data-row.selected .data-cell:first-child {
    border-left: none;
}

.data-row.selected .data-cell:last-child {
    border-right: none;
}

.data-row:hover {
    background-color: #f8f9fa;
}

.data-row:hover .data-cell {
    border-right: 1px solid #dee2e6;
    border-bottom: 1px solid #dee2e6;
    border-top: 1px solid #dee2e6;
    border-left: 1px solid #dee2e6;
}

.data-row:hover .data-cell:first-child {
    border-left: none;
}

.data-row:hover .data-cell:last-child {
    border-right: none;
}

.form-group input[type="date"] {
    display: none;
}

.calendar-wrapper {
    position: relative;
}

.calendar-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    background-color: white;
    color: #374151;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.calendar-popup {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    width: 300px;
    padding: 16px;
    margin-top: 4px;
    display: none;
}

.calendar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.month-year-selector {
    display: flex;
    align-items: center;
    gap: 8px;
}

.month-select, .year-select {
    padding: 4px 8px;
    border: none;
    background: transparent;
    font-size: 14px;
    color: #374151;
    cursor: pointer;
}

.calendar-nav {
    display: flex;
    gap: 8px;
}

.nav-btn {
    border: none;
    background: transparent;
    cursor: pointer;
    padding: 4px;
    color: #374151;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
}

.calendar-day-header {
    text-align: center;
    font-size: 12px;
    color: #6B7280;
    padding: 4px;
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: #374151;
    cursor: pointer;
    border-radius: 50%;
    transition: all 0.2s;
}

.calendar-day:hover {
    background-color: #E0DDF2;
}

.calendar-day.other-month {
    color: #9CA3AF;
}

.calendar-day.selected {
    background-color: #4417DD;
    color: white;
}

.calendar-day.today {
    border: 2px solid #4417DD;
}

.time-picker-wrapper {
    position: relative;
}

.time-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    background-color: white;
    color: #374151;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.time-picker-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
    background: #F8F7FD;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    width: 250px;
    padding: 16px;
}

.time-picker-header {
    font-size: 14px;
    color: #374151;
    margin-bottom: 16px;
}

.time-picker-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.time-input-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

.time-field-wrapper {
    position: relative;
    display: flex;
    flex-direction: column;
}

.time-field-arrows {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 2px;
}

.time-arrow {
    padding: 2px 6px;
    border: none;
    background: none;
    color: #4417DD;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.time-arrow:hover {
    opacity: 1;
}

.time-arrow i {
    font-size: 12px;
}

.time-field {
    width: 60px;
    padding: 8px 24px 8px 8px;
    border: none;
    border-radius: 8px;
    background: #E0DDF2;
    color: #374151;
    font-size: 24px;
    text-align: center;
    cursor: pointer;
}

.time-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
    display: none;
}

.ampm-toggle {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.ampm-btn {
    padding: 4px 12px;
    border: none;
    background: none;
    border-radius: 4px;
    cursor: pointer;
    color: #374151;
    font-size: 14px;
    transition: all 0.2s;
}

.ampm-btn.active {
    background-color: #E0DDF2;
    color: #4417DD;
}

.time-picker-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

.time-picker-btn {
    padding: 6px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
}

.time-picker-btn.cancel {
    background: none;
    color: #4417DD;
}

.time-picker-btn.ok {
    background: #4417DD;
    color: white;
}

.reminder-add-btn {
    height: 38px;
    width: 38px;
    background-color: #4417DD;
    color: white;
    border-radius: 6px;
    border: none;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: bold;
    line-height: 1;
    cursor: pointer;
}

.reminder-add-btn i {
    display: flex;
    align-items: center;
    justify-content: center;
}

.custom-select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24"><path fill="black" stroke="black" stroke-width="2" d="M6 9l6 6 6-6"/></svg>') no-repeat right 1rem center;
  background-size: 20px;
  padding-right: 3rem;
  font-size: 14.5px;
  border: 1px solid #ccc;
  border-radius: 6px;
  height: 40px;
}

</style>
</head>
<body>
    <header>
        <div class="action-panel">
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>Add</button>
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>Modify</button>
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>Delete</button>
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>Close</button>
        </div>
    </header>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <img src="https://taskplus.in/assets/img/logo/logo.png" alt="Company Logo"/>
        </div>
        <nav>
            <ul style="text-align: left;"><li><a href="#" class="active"><b>Task Setup</b></a></li></ul>
        </nav>
    </div>
    <!-- Modal -->
<div class="modal" id="taskFormModal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 10px;">
              <img src="https://taskplus.in/assets/img/webpage/logo/logoPopup.png" alt="Company Logo" style="height: 35px;" />
              <h2>Task Setup</h2>
            </div>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-group full">
                    <label>Task Type</label>
                    <select id="taskType" style="cursor: pointer;" class="custom-select"><option>Select</option></select>
                </div>
      
                <div class="form-group">
                    <label>Create Task When</label>
                    <select id="executionType" style="cursor: pointer;" class="custom-select"><option>Select</option></select>
                </div>

                <div class="form-group">
                    <label>Create On</label>
                    <div class="calendar-wrapper">
                        <input type="date" id="dayOfMonth" style="display: none;">
                        <div class="calendar-input" id="calendarTrigger">
                            <span id="selectedDate" style="font-size: 14.5px; margin-left: -4.5px;">Select date</span>
                            <i class="bi bi-calendar" style="color: #000000; margin-right: 6.5px; font-size: 16px;"></i>
                        </div>
                        <div class="calendar-popup" id="calendarPopup">
                            <div class="calendar-header">
                                <div class="month-year-selector">
                                    <select class="month-select" id="monthSelect">
                                        <option value="0">January</option>
                                        <option value="1">February</option>
                                        <option value="2">March</option>
                                        <option value="3">April</option>
                                        <option value="4">May</option>
                                        <option value="5">June</option>
                                        <option value="6">July</option>
                                        <option value="7">August</option>
                                        <option value="8">September</option>
                                        <option value="9">October</option>
                                        <option value="10">November</option>
                                        <option value="11">December</option>
                                    </select>
                                    <select class="year-select" id="yearSelect"></select>
                                </div>
                                <div class="calendar-nav">
                                    <button class="nav-btn" id="prevMonth"><i class="bi bi-chevron-left"></i></button>
                                    <button class="nav-btn" id="nextMonth"><i class="bi bi-chevron-right"></i></button>
                                </div>
                            </div>
                            <div class="calendar-grid" id="calendarGrid">
                                <div class="calendar-day-header">Sun</div>
                                <div class="calendar-day-header">Mon</div>
                                <div class="calendar-day-header">Tue</div>
                                <div class="calendar-day-header">Wed</div>
                                <div class="calendar-day-header">Thu</div>
                                <div class="calendar-day-header">Fri</div>
                                <div class="calendar-day-header">Sat</div>
                            </div>
                        </div>
                    </div>
                </div>
      
                <div class="form-group">
                    <label>Created By</label>
                    <select id="createdBy" style="cursor: pointer;" class="custom-select"><option>Select</option></select>
                </div>

                <div class="form-group">
                    <label>Allocate To</label>
                    <select id="assignTo" style="cursor: pointer;" class="custom-select"><option>Select</option></select>
                </div>
      
                <div class="form-group tall">
                    <label>Task Description</label>
                    <textarea id="description" rows="6"></textarea>
                </div>

                <div class="form-group">
                    <label>Category</label>
                    <select id="category" style="cursor: pointer;" class="custom-select"><option>Select</option></select>
                </div>

                <div class="form-group">
                    <label>Due After</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="dueAfterValue" style="width: 300px;" />
                        <select id="dueAfterUnit" style="width: 111px; cursor: pointer;" class="custom-select"><option>Days</option></select>
                    </div>
                </div>
      
                <div class="form-group">
                    <label>Priority</label>
                    <div class="priority-cards">
                        <label class="priority-card high">
                            <input type="radio" name="priority" value="High" checked />
                            <i class="bi bi-arrow-up" style="color: #000000;"></i>
                            <span style="color: #000000;">High</span>
                        </label>
                        <label class="priority-card medium">
                            <input type="radio" name="priority" value="Medium" />
                            <i class="bi bi-arrow-up" style="color: #000000;"></i>
                            <span style="color: #000000;">Medium</span>
                        </label>
                        <label class="priority-card low">
                            <input type="radio" name="priority" value="Low" />
                            <i class="bi bi-arrow-down" style="color: #000000;"></i>
                            <span style="color: #000000;">Low</span>
                        </label>
                    </div>              
                </div>

                <div class="form-group">
                    <label>Time</label>
                    <div style="display: flex; gap: 10px;">
                        <div class="time-picker-wrapper" style="width: 300px;">
                            <input type="time" id="time" style="display: none;">
                            <div class="time-input" id="timeInput">
                                <span id="selectedTime">Enter time</span>
                                <i class="bi bi-clock"></i>
                            </div>
                            <div class="time-overlay" id="timeOverlay"></div>
                            <div class="time-picker-popup" id="timePickerPopup">
                                <div class="time-picker-header">
                                    Enter time
                                </div>
                                <div class="time-picker-content">
                                    <div class="time-input-group">
                                        <div class="time-field-wrapper">
                                            <input type="text" class="time-field" id="hourInput" maxlength="2" placeholder="07">
                                            <div class="time-field-arrows">
                                                <button class="time-arrow" id="hourUp">
                                                    <i class="bi bi-chevron-up"></i>
                                                </button>
                                                <button class="time-arrow" id="hourDown">
                                                    <i class="bi bi-chevron-down"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <span class="time-separator">:</span>
                                        <div class="time-field-wrapper">
                                            <input type="text" class="time-field" id="minuteInput" maxlength="2" placeholder="00">
                                            <div class="time-field-arrows">
                                                <button class="time-arrow" id="minuteUp">
                                                    <i class="bi bi-chevron-up"></i>
                                                </button>
                                                <button class="time-arrow" id="minuteDown">
                                                    <i class="bi bi-chevron-down"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ampm-toggle">
                                        <button class="ampm-btn active" data-value="AM">AM</button>
                                        <button class="ampm-btn" data-value="PM">PM</button>
                                    </div>
                                </div>
                                <div class="time-picker-footer">
                                    <button class="time-picker-btn cancel">Cancel</button>
                                    <button class="time-picker-btn ok">OK</button>
                                </div>
                            </div>
                        </div>
                        <button class="form-btn" style="height: 38px; width: 111px; font-size: 15px; display: flex; align-items: center; justify-content: center; gap: 6px;">
                            <i class="bi bi-bell"></i>
                            Reminder
                        </button>
                    </div>
                </div>

                <div class="form-group full">
                    <label>Complete Task When</label>
                    <select id="completeTaskWhen" style="cursor: pointer;" class="custom-select"><option>Select</option></select>
                </div>

            </div>
        </div>
        <div class="modal-footer">
            <button class="form-btn" onclick="addTask()" style="height: 40px; width: 90px; font-size: 15px;">Save</button>
            <button class="form-btn secondary" onclick="closeModal()" style="width: 90px; font-size: 15px;">Close</button>
        </div>
    </div>
</div>

<!-- Reminder Modal -->
<div class="modal" id="reminderModal" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 10px;">
                <img src="https://taskplus.in/assets/img/webpage/logo/logoPopup.png" alt="Company Logo" style="height: 35px;" />
                <h2>Add Reminder</h2>
            </div>
        </div>
        <div class="modal-body">
            <div style="display: flex; gap: 10px; margin-bottom: 16px;">
                <select id="reminderType" style="flex: 1; padding: 6px; border: 1px solid #ccc; border-radius: 6px;" class="custom-select">
                    <option>Email</option>
                    <option>Notification</option>
                </select>
                <input id="reminderValue" type="number" value="0" style="width: 80px; border: 1px solid #ccc; border-radius: 6px; padding: 6px;" />
                <select id="reminderUnit" style="width: 111px; border: 1px solid #ccc; border-radius: 6px; padding: 6px;" class="custom-select">
                    <option>Minutes</option>
                    <option>Hours</option>
                    <option>Days</option>
                </select>
                <button class="reminder-add-btn" onclick="addReminder()">
                    <i class="bi bi-plus"></i>
                </button>
            </div>

            <div style="height: 1px; background-color: #ccc; margin: 16px 0;"></div>

            <div id="reminderList" style="max-height: 200px; overflow-y: auto; padding: 10px 0; display: flex; flex-direction: column; gap: 10px;">
                <div style="text-align: center; color: #999;" id="noReminderText">No data</div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="form-btn primary" style="height: 42px;" onclick="saveReminders()">Save Reminder</button>
            <button class="form-btn secondary" onclick="closeReminder()">Close</button>
        </div>
    </div>
</div>

<!-- Task Container -->
<div id="taskContainer" style="margin: 90px 20px 60px 270px;"></div>

<!-- Task Count Footer -->
<div class="task-count">
    Count: <span id="taskCountText">0</span>
</div>

<!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
<script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
<script>
    const modal = document.getElementById("taskFormModal");
    const addButton = document.querySelector(".action-button");
    const reminderBtn = document.querySelector('.time-picker-wrapper + .form-btn');
    const reminderModal = document.getElementById("reminderModal");
    const reminderList = document.getElementById("reminderList");

    let tempReminders = [];
    let savedReminders = [];
    let taskData = [];
    let selectedTaskIndex = -1;

    // Function to reset form fields
    function resetForm() {
        document.getElementById('taskType').value = '';
        document.getElementById('executionType').value = '';
        document.getElementById('dayOfMonth').value = '';
        document.getElementById('createdBy').value = '';
        document.getElementById('assignTo').value = '';
        document.getElementById('description').value = '';
        document.getElementById('category').value = '';
        document.getElementById('dueAfterValue').value = '';
        document.getElementById('dueAfterUnit').value = 'Days';
        document.querySelector('input[name="priority"][value="High"]').checked = true;
        document.getElementById('time').value = '';
        document.getElementById('completeTaskWhen').value = '';
        document.getElementById('selectedTime').textContent = 'Enter time';
        document.getElementById('selectedDate').textContent = 'Select date';
        savedReminders = [];
    }

    // Sample data for dropdowns
    const taskTypes = ['Regular Task', 'Urgent Task', 'Meeting', 'Follow-up'];
    const executionTypes = ['Immediately', 'On Specific Date', 'Weekly', 'Monthly'];
    const users = ['John Doe', 'Jane Smith', 'Mike Johnson', 'Sarah Wilson'];
    const categories = ['Development', 'Design', 'Marketing', 'Sales', 'Support'];

    // Populate dropdowns on page load
    window.onload = function() {
        populateDropdown('taskType', taskTypes);
        populateDropdown('executionType', executionTypes);
        populateDropdown('createdBy', users);
        populateDropdown('assignTo', users);
        populateDropdown('category', categories);
        populateDropdown('completeTaskWhen', ['On Date', 'After Days', 'Never']);
        populateDropdown('dueAfterUnit', ['Days', 'Weeks', 'Months']);
        
        // Initialize task container with "No data" message
        renderTasks();
    };

    function populateDropdown(id, options) {
        const select = document.getElementById(id);
        select.innerHTML = '<option value="">Select</option>';
        options.forEach(option => {
            const optionElement = document.createElement('option');
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });
    }

    // Open task form modal
    addButton.addEventListener("click", () => {
        selectedTaskIndex = -1; // Reset selected task index
        resetForm(); // Reset form fields
        modal.style.display = "flex";
    });

    // Close task form modal
    function closeModal() {
        modal.style.display = "none";
        // Hide time picker and overlay when closing modal
        const timePickerPopup = document.getElementById('timePickerPopup');
        const timeOverlay = document.getElementById('timeOverlay');
        if (timePickerPopup) timePickerPopup.style.display = 'none';
        if (timeOverlay) timeOverlay.style.display = 'none';
    }

    // Open reminder modal
    reminderBtn.addEventListener("click", () => {
        // start with savedReminders in temp so they show in modal
        tempReminders = [...savedReminders];
        reminderModal.style.display = "flex";
        renderReminders();
    });

    // Close reminder modal and discard changes
    function closeReminder() {
        tempReminders = [];
        reminderModal.style.display = "none";
    }

    // Save reminders permanently
    function saveReminders() {
        savedReminders = [...tempReminders];
        reminderModal.style.display = "none";
    }

    // Add reminder
    function addReminder() {
        const type = document.getElementById("reminderType").value;
        const value = document.getElementById("reminderValue").value;
        const unit = document.getElementById("reminderUnit").value;

        if (value === "" || isNaN(value) || value < 0) {
            alert("Please enter a valid number for time.");
            return;
        }

        // Check for duplicates
        const isDuplicate = tempReminders.some(reminder => 
            reminder.type === type && 
            reminder.value === value && 
            reminder.unit === unit
        );

        if (isDuplicate) {
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '50%';
            modal.style.left = '50%';
            modal.style.transform = 'translate(-50%, -50%) scale(0.1)';
            modal.style.backgroundColor = 'white';
            modal.style.padding = '35px 25px';
            modal.style.borderRadius = '8px';
            modal.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
            modal.style.zIndex = '1000';
            modal.style.display = 'flex';
            modal.style.flexDirection = 'column';
            modal.style.alignItems = 'center';
            modal.style.gap = '25px';
            modal.style.width = '300px';
            modal.style.opacity = '0';
            modal.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';

            // Exclamation icon with animation
            const icon = document.createElement('div');
            icon.innerHTML = '<i class="fa-solid fa-circle-exclamation" style="color: #ff0000; font-size: 45px; transform: scale(0); opacity: 0; transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s;"></i>';
            
            // Message with animation
            const message = document.createElement('div');
            message.textContent = 'Reminder with same values already exists, Please change values to add new reminder.';
            message.style.color = '#ff0000';
            message.style.fontSize = '18px';
            message.style.textAlign = 'center';
            message.style.fontWeight = '500';
            message.style.lineHeight = '1.5';
            message.style.opacity = '0';
            message.style.transform = 'translateY(10px)';
            message.style.transition = 'all 0.5s ease 0.4s';

            modal.appendChild(icon);
            modal.appendChild(message);

            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.right = '0';
            overlay.style.bottom = '0';
            overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
            overlay.style.zIndex = '999';
            overlay.style.opacity = '0';
            overlay.style.transition = 'opacity 0.5s ease-in-out';

            document.body.appendChild(overlay);
            document.body.appendChild(modal);

            // Trigger animations
            requestAnimationFrame(() => {
                modal.style.transform = 'translate(-50%, -50%) scale(1)';
                modal.style.opacity = '1';
                overlay.style.opacity = '1';
                
                // Animate icon
                const iconElement = icon.querySelector('i');
                iconElement.style.transform = 'scale(1)';
                iconElement.style.opacity = '1';
                
                // Animate message
                message.style.opacity = '1';
                message.style.transform = 'translateY(0)';
            });

            // Remove with animation
            setTimeout(() => {
                modal.style.transform = 'translate(-50%, -50%) scale(0.1)';
                modal.style.opacity = '0';
                overlay.style.opacity = '0';
                
                // Reverse icon animation
                const iconElement = icon.querySelector('i');
                iconElement.style.transform = 'scale(0)';
                iconElement.style.opacity = '0';
                
                // Reverse message animation
                message.style.opacity = '0';
                message.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    document.body.removeChild(overlay);
                    document.body.removeChild(modal);
                }, 500);
            }, 2500);
            return;
        }

        tempReminders.push({
            type: type,
            value: value,
            unit: unit
        });
        renderReminders();
    }

    // Render reminders in modal
    function renderReminders() {
        reminderList.innerHTML = "";

        if (tempReminders.length === 0) {
            const noData = document.createElement("div");
            noData.textContent = "No data";
            noData.style.color = "#999";
            noData.style.textAlign = "center";
            reminderList.appendChild(noData);
            return;
        }

        tempReminders.forEach(reminder => {
            const item = document.createElement("div");
            item.style.display = "flex";
            item.style.gap = "10px";
            item.style.alignItems = "center";
            item.style.padding = "0";
            item.style.backgroundColor = "#ffffff";

            // Type box (Email/Notification)
            const typeSelect = document.createElement("select");
            typeSelect.style.flex = "1";
            typeSelect.style.padding = "6px";
            typeSelect.style.border = "1px solid #ccc";
            typeSelect.style.borderRadius = "6px";
            typeSelect.style.width = "300px";
            typeSelect.disabled = true;
            typeSelect.style.appearance = "none";
            typeSelect.style.backgroundColor = "white";
            typeSelect.style.color = "#000000";
            typeSelect.style.cursor = "default";
            typeSelect.style.opacity = "1";
            const emailOption = document.createElement("option");
            emailOption.text = reminder.type;
            typeSelect.add(emailOption);

            // Value box (Number)
            const valueInput = document.createElement("input");
            valueInput.type = "number";
            valueInput.value = reminder.value;
            valueInput.style.width = "80px";
            valueInput.style.padding = "6px";
            valueInput.style.border = "1px solid #ccc";
            valueInput.style.borderRadius = "6px";
            valueInput.disabled = true;
            valueInput.style.backgroundColor = "white";
            valueInput.style.color = "#000000";
            valueInput.style.cursor = "default";
            valueInput.style.opacity = "1";

            // Unit box (Minutes/Hours/Days)
            const unitSelect = document.createElement("select");
            unitSelect.style.width = "111px";
            unitSelect.style.padding = "6px";
            unitSelect.style.border = "1px solid #ccc";
            unitSelect.style.borderRadius = "6px";
            unitSelect.disabled = true;
            unitSelect.style.appearance = "none";
            unitSelect.style.backgroundColor = "white";
            unitSelect.style.color = "#000000";
            unitSelect.style.cursor = "default";
            unitSelect.style.opacity = "1";
            const unitOption = document.createElement("option");
            unitOption.text = reminder.unit;
            unitSelect.add(unitOption);

            // Delete button
            const deleteButton = document.createElement("button");
            deleteButton.innerHTML = '<i class="fa-solid fa-xmark" style="color: rgb(240, 36, 36); font-size: 18px;"></i>';
            deleteButton.style.background = "none";
            deleteButton.style.border = "none";
            deleteButton.style.cursor = "pointer";
            deleteButton.style.padding = "6px 12px";
            deleteButton.style.height = "38px";
            deleteButton.style.width = "38px";
            deleteButton.style.display = "flex";
            deleteButton.style.alignItems = "center";
            deleteButton.style.justifyContent = "center";
            deleteButton.style.opacity = "1";
            deleteButton.onclick = function() {
                const index = tempReminders.indexOf(reminder);
                if (index > -1) {
                    tempReminders.splice(index, 1);
                    renderReminders();
                }
            };

            item.appendChild(typeSelect);
            item.appendChild(valueInput);
            item.appendChild(unitSelect);
            item.appendChild(deleteButton);
            reminderList.appendChild(item);
        });
    }
    
    function addTask() {
        const task = {
            taskType: document.getElementById('taskType').value,
            executionType: document.getElementById('executionType').value,
            dayOfMonth: document.getElementById('dayOfMonth').value,
            createdBy: document.getElementById('createdBy').value,
            assignTo: document.getElementById('assignTo').value,
            description: document.getElementById('description').value,
            category: document.getElementById('category').value,
            dueAfter: {
                value: document.getElementById('dueAfterValue').value,
                unit: document.getElementById('dueAfterUnit').value
            },
            priority: document.querySelector('input[name="priority"]:checked').value,
            time: document.getElementById('time').value,
            completeTaskWhen: document.getElementById('completeTaskWhen').value,
            reminders: [...savedReminders]
        };

        // Validate required fields
        if (!task.taskType || !task.executionType || !task.createdBy || !task.assignTo) {
            alert('Please fill in all required fields');
            return;
        }

        if (selectedTaskIndex === -1) {
            // Add new task
            taskData.push(task);
        } else {
            // Update existing task
            taskData[selectedTaskIndex] = task;
            selectedTaskIndex = -1;
        }
        
        // Render tasks
        renderTasks();
        
        // Close modal and reset form
        closeModal();
        resetForm();

        // Update task count
        const taskCount = taskData.length;
        const taskCountText = document.getElementById('taskCountText');
        taskCountText.textContent = taskCount;
    }

    function formatDate(dateString) {
        if (!dateString) return '';
        const date = new Date(dateString);
        if (isNaN(date.getTime())) return '';
        
        const day = date.getDate().toString().padStart(2, '0');
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const year = date.getFullYear();
        
        return `${day}/${month}/${year}`;
    }

    // Add click handlers for row selection and deselection
    function setupRowSelection() {
        document.querySelectorAll('.data-row:not(.data-header .data-row):not(.filter-row .data-row)').forEach(row => {
            row.addEventListener('click', () => {
                document.querySelectorAll('.data-row').forEach(r => r.classList.remove('selected'));
                row.classList.add('selected');
                selectedTaskIndex = parseInt(row.dataset.index);
            });
        });

        // Add click handler to deselect when clicking outside
        document.addEventListener('click', (e) => {
            const clickedElement = e.target;
            const isDataRow = clickedElement.closest('.data-row:not(.data-header .data-row):not(.filter-row .data-row)');
            const isModal = clickedElement.closest('.modal');
            const isCalendar = clickedElement.closest('.calendar-popup') || clickedElement.closest('.calendar-input');
            const isTimePicker = clickedElement.closest('.time-picker-popup') || clickedElement.closest('.time-input');
            
            // Only deselect if clicking outside of data rows and not in any modal/popup
            if (!isDataRow && !isModal && !isCalendar && !isTimePicker) {
                document.querySelectorAll('.data-row').forEach(r => r.classList.remove('selected'));
                selectedTaskIndex = -1;
            }
        });
    }

    // Filter functionality
    function setupFilters() {
        const filterInputs = document.querySelectorAll('.filter-input');
        
        function applyFilters() {
            const rows = document.querySelectorAll('.data-content .data-row');
            let visibleCount = 0;
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('.data-cell');
                let shouldShow = true;
                
                // Check each filter input
                filterInputs.forEach((input, index) => {
                    const searchTerm = input.value.toLowerCase();
                    const cellText = cells[index].textContent.toLowerCase();
                    
                    if (searchTerm && !cellText.startsWith(searchTerm)) {
                        shouldShow = false;
                    }
                });
                
                if (shouldShow) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });
            
            // Update task count with filtered count
            const taskCountText = document.getElementById('taskCountText');
            taskCountText.textContent = visibleCount;
            
            // Show/hide "No data" message
            if (visibleCount === 0) {
                const noDataMessage = document.querySelector('.no-data');
                if (!noDataMessage) {
                    const noData = document.createElement('div');
                    noData.className = 'no-data';
                    noData.textContent = 'No data';
                    document.querySelector('.data-content').appendChild(noData);
                }
            } else {
                const noDataMessage = document.querySelector('.no-data');
                if (noDataMessage) {
                    noDataMessage.remove();
                }
            }
        }
        
        // Add input event listener to each filter
        filterInputs.forEach(input => {
            input.addEventListener('input', applyFilters);
        });
    }

    // Update the renderTasks function to show total count initially
    function renderTasks() {
        const container = document.getElementById('taskContainer');
        let html = `<div class="data-container">
            <div class="data-header">
                <div class="data-row">
                    <div class="data-cell">Task Type</div>
                    <div class="data-cell">Execution Type</div>
                    <div class="data-cell">Created By</div>
                    <div class="data-cell">Task Description</div>
                    <div class="data-cell">Priority</div>
                    <div class="data-cell">Allocated To</div>
                    <div class="data-cell">Category</div>
                    <div class="data-cell">Day Of Month</div>
                    <div class="data-cell">Time</div>
                    <div class="data-cell">Due After</div>
                    <div class="data-cell">Due Unit</div>
                    <div class="data-cell">Completion Criteria</div>
                </div>
            </div>
            <div class="filter-row">
                <div class="data-row">
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                    <div class="data-cell"><input type="text" class="filter-input"></div>
                </div>
            </div>
            <div class="data-content">`;

        if (!taskData || taskData.length === 0) {
            html += '<div class="no-data">No data</div>';
        } else {
            taskData.forEach((task, index) => {
                html += `
                    <div class="data-row ${selectedTaskIndex === index ? 'selected' : ''}" data-index="${index}">
                        <div class="data-cell">${task.taskType || ''}</div>
                        <div class="data-cell">${task.executionType || ''}</div>
                        <div class="data-cell">${task.createdBy || ''}</div>
                        <div class="data-cell">${task.description || ''}</div>
                        <div class="data-cell">
                            <span class="priority-tag priority-${task.priority?.toLowerCase()}">${task.priority || ''}</span>
                        </div>
                        <div class="data-cell">${task.assignTo || ''}</div>
                        <div class="data-cell">${task.category || ''}</div>
                        <div class="data-cell">${formatDate(task.dayOfMonth)}</div>
                        <div class="data-cell">${task.time || ''}</div>
                        <div class="data-cell">${task.dueAfter?.value || ''}</div>
                        <div class="data-cell">${task.dueAfter?.unit || 'Days'}</div>
                        <div class="data-cell">${task.completeTaskWhen || ''}</div>
                    </div>
                `;
            });
        }

        html += `</div></div>`;
        
        container.innerHTML = html;

        // Update task count with total count initially
        const taskCount = taskData.length;
        const taskCountText = document.getElementById('taskCountText');
        taskCountText.textContent = taskCount;

        // Setup row selection after rendering
        setupRowSelection();
        
        // Setup filters after rendering
        setupFilters();
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Get action buttons
        const addButton = document.querySelector('.action-button:nth-child(1)');
        const modifyButton = document.querySelector('.action-button:nth-child(2)');
        const deleteButton = document.querySelector('.action-button:nth-child(3)');
        const closeButton = document.querySelector('.action-button:nth-child(4)');

        // Add task button functionality
        addButton.addEventListener('click', () => {
            selectedTaskIndex = -1; // Reset selected task index
            resetForm(); // Reset form fields
            modal.style.display = "flex";
        });

        // Modify task button functionality
        modifyButton.addEventListener('click', () => {
            if (selectedTaskIndex === -1) {
                showPopupMessage('Please select a task setup to modify.');
                return;
            }
            
            const task = taskData[selectedTaskIndex];
            
            // Fill form with selected task data
            document.getElementById('taskType').value = task.taskType;
            document.getElementById('executionType').value = task.executionType;
            document.getElementById('dayOfMonth').value = task.dayOfMonth;
            document.getElementById('createdBy').value = task.createdBy;
            document.getElementById('assignTo').value = task.assignTo;
            document.getElementById('description').value = task.description;
            document.getElementById('category').value = task.category;
            document.getElementById('dueAfterValue').value = task.dueAfter?.value || '';
            document.getElementById('dueAfterUnit').value = task.dueAfter?.unit || 'Days';
            document.querySelector(`input[name="priority"][value="${task.priority}"]`).checked = true;
            document.getElementById('time').value = task.time;
            document.getElementById('completeTaskWhen').value = task.completeTaskWhen;
            
            // Update time display
            if (task.time) {
                const [hours, minutes] = task.time.split(':');
                const hour = parseInt(hours);
                const ampm = hour >= 12 ? 'PM' : 'AM';
                const displayHour = hour % 12 || 12;
                document.getElementById('selectedTime').textContent = 
                    `${displayHour.toString().padStart(2, '0')}:${minutes} ${ampm}`;
            }
            
            // Update date display
            if (task.dayOfMonth) {
                const date = new Date(task.dayOfMonth);
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                document.getElementById('selectedDate').textContent = `${day}/${month}/${year}`;
            }
            
            // Set reminders
            savedReminders = [...(task.reminders || [])];
            
            // Show modal
            modal.style.display = "flex";
        });

        // Delete task button functionality
        deleteButton.addEventListener('click', () => {
            if (selectedTaskIndex === -1) {
                showPopupMessage('Please select a task setup to delete.');
                return;
            }
            
            // Create confirmation popup
            const confirmModal = document.createElement('div');
            confirmModal.style.position = 'fixed';
            confirmModal.style.top = '50%';
            confirmModal.style.left = '50%';
            confirmModal.style.transform = 'translate(-50%, -50%) scale(0.1)';
            confirmModal.style.backgroundColor = 'white';
            confirmModal.style.padding = '35px 25px';
            confirmModal.style.borderRadius = '8px';
            confirmModal.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
            confirmModal.style.zIndex = '1000';
            confirmModal.style.display = 'flex';
            confirmModal.style.flexDirection = 'column';
            confirmModal.style.alignItems = 'center';
            confirmModal.style.gap = '25px';
            confirmModal.style.width = '300px';
            confirmModal.style.opacity = '0';
            confirmModal.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';

            // Icon
            const icon = document.createElement('div');
            icon.innerHTML = '<i class="fas fa-exclamation-triangle" style="color: #ffc107; font-size: 45px;"></i>';
            
            // Message
            const message = document.createElement('div');
            message.textContent = 'Are you sure you want to delete this task setup?';
            message.style.color = '#374151';
            message.style.fontSize = '18px';
            message.style.textAlign = 'center';
            message.style.fontWeight = '500';
            message.style.lineHeight = '1.5';
            
            // Buttons container
            const buttonsContainer = document.createElement('div');
            buttonsContainer.style.display = 'flex';
            buttonsContainer.style.gap = '10px';
            buttonsContainer.style.marginTop = '10px';
            
            // Cancel button
            const cancelBtn = document.createElement('button');
            cancelBtn.textContent = 'Cancel';
            cancelBtn.style.padding = '8px 16px';
            cancelBtn.style.border = '1px solid #ccc';
            cancelBtn.style.borderRadius = '6px';
            cancelBtn.style.backgroundColor = 'white';
            cancelBtn.style.cursor = 'pointer';
            cancelBtn.style.transition = 'all 0.2s';
            
            // Delete button
            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = 'Delete';
            deleteBtn.style.padding = '8px 16px';
            deleteBtn.style.border = 'none';
            deleteBtn.style.borderRadius = '6px';
            deleteBtn.style.backgroundColor = '#dc3545';
            deleteBtn.style.color = 'white';
            deleteBtn.style.cursor = 'pointer';
            deleteBtn.style.transition = 'all 0.2s';
            
            buttonsContainer.appendChild(cancelBtn);
            buttonsContainer.appendChild(deleteBtn);
            
            confirmModal.appendChild(icon);
            confirmModal.appendChild(message);
            confirmModal.appendChild(buttonsContainer);
            
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.right = '0';
            overlay.style.bottom = '0';
            overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
            overlay.style.zIndex = '999';
            overlay.style.opacity = '0';
            overlay.style.transition = 'opacity 0.5s ease-in-out';
            
            document.body.appendChild(overlay);
            document.body.appendChild(confirmModal);
            
            // Show animation
            requestAnimationFrame(() => {
                confirmModal.style.transform = 'translate(-50%, -50%) scale(1)';
                confirmModal.style.opacity = '1';
                overlay.style.opacity = '1';
            });
            
            // Button click handlers
            cancelBtn.addEventListener('click', () => {
                confirmModal.style.transform = 'translate(-50%, -50%) scale(0.1)';
                confirmModal.style.opacity = '0';
                overlay.style.opacity = '0';
                
                setTimeout(() => {
                    document.body.removeChild(overlay);
                    document.body.removeChild(confirmModal);
                }, 500);
            });
            
            deleteBtn.addEventListener('click', () => {
                taskData.splice(selectedTaskIndex, 1);
                selectedTaskIndex = -1;
                renderTasks();
                
                // Update task count
                const taskCount = taskData.length;
                const taskCountText = document.getElementById('taskCountText');
                taskCountText.textContent = taskCount;
                
                confirmModal.style.transform = 'translate(-50%, -50%) scale(0.1)';
                confirmModal.style.opacity = '0';
                overlay.style.opacity = '0';
                
                setTimeout(() => {
                    document.body.removeChild(overlay);
                    document.body.removeChild(confirmModal);
                }, 500);
                
                showPopupMessage('Task deleted successfully', 'success');
            });
        });

        // Close button functionality
        closeButton.addEventListener('click', () => {
            selectedTaskIndex = -1;
            closeModal();
        });

        // Function to reset form fields
        function resetForm() {
            document.getElementById('taskType').value = '';
            document.getElementById('executionType').value = '';
            document.getElementById('dayOfMonth').value = '';
            document.getElementById('createdBy').value = '';
            document.getElementById('assignTo').value = '';
            document.getElementById('description').value = '';
            document.getElementById('category').value = '';
            document.getElementById('dueAfterValue').value = '';
            document.getElementById('dueAfterUnit').value = 'Days';
            document.querySelector('input[name="priority"][value="High"]').checked = true;
            document.getElementById('time').value = '';
            document.getElementById('completeTaskWhen').value = '';
            document.getElementById('selectedTime').textContent = 'Enter time';
            document.getElementById('selectedDate').textContent = 'Select date';
            savedReminders = [];
        }

        // Calendar functionality
        const calendarTrigger = document.getElementById('calendarTrigger');
        const calendarPopup = document.getElementById('calendarPopup');
        const monthSelect = document.getElementById('monthSelect');
        const yearSelect = document.getElementById('yearSelect');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');
        const calendarGrid = document.getElementById('calendarGrid');
        const selectedDateSpan = document.getElementById('selectedDate');
        const hiddenDateInput = document.getElementById('dayOfMonth');

        // Initialize calendar
        function initCalendar() {
            const currentDate = new Date();
            const currentYear = currentDate.getFullYear();
            
            // Populate year select
            for (let year = currentYear - 5; year <= currentYear + 5; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                if (year === currentYear) option.selected = true;
                yearSelect.appendChild(option);
            }
            
            // Set current month
            monthSelect.value = currentDate.getMonth();
            
            updateCalendar();
        }

        function updateCalendar() {
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDay = firstDay.getDay();
            
            // Clear existing days
            while (calendarGrid.children.length > 7) {
                calendarGrid.removeChild(calendarGrid.lastChild);
            }
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < startingDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = 'calendar-day other-month';
                calendarGrid.appendChild(emptyCell);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'calendar-day';
                dayCell.textContent = day;
                
                // Check if this is today
                const today = new Date();
                if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                    dayCell.classList.add('today');
                }
                
                // Check if this is the selected date
                if (hiddenDateInput.value) {
                    const selectedDate = new Date(hiddenDateInput.value);
                    if (day === selectedDate.getDate() && month === selectedDate.getMonth() && year === selectedDate.getFullYear()) {
                        dayCell.classList.add('selected');
                    }
                }
                
                dayCell.addEventListener('click', () => {
                    // Remove selected class from all days
                    document.querySelectorAll('.calendar-day').forEach(cell => {
                        cell.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked day
                    dayCell.classList.add('selected');
                    
                    // Update selected date
                    const selectedDate = new Date(year, month, day);
                    hiddenDateInput.value = selectedDate.toISOString().split('T')[0];
                    selectedDateSpan.textContent = `${day.toString().padStart(2, '0')}/${(month + 1).toString().padStart(2, '0')}/${year}`;
                    
                    // Hide calendar popup
                    calendarPopup.style.display = 'none';
                });
                
                calendarGrid.appendChild(dayCell);
            }
        }

        // Show/hide calendar popup
        calendarTrigger.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            calendarPopup.style.display = calendarPopup.style.display === 'none' ? 'block' : 'none';
        });

        // Hide calendar when clicking outside
        document.addEventListener('click', (e) => {
            if (!calendarTrigger.contains(e.target) && !calendarPopup.contains(e.target)) {
                calendarPopup.style.display = 'none';
            }
        });

        // Handle month/year changes
        monthSelect.addEventListener('change', updateCalendar);
        yearSelect.addEventListener('change', updateCalendar);

        // Handle prev/next month buttons
        prevMonthBtn.addEventListener('click', () => {
            if (monthSelect.value === '0') {
                monthSelect.value = '11';
                yearSelect.value = parseInt(yearSelect.value) - 1;
            } else {
                monthSelect.value = parseInt(monthSelect.value) - 1;
            }
            updateCalendar();
        });

        nextMonthBtn.addEventListener('click', () => {
            if (monthSelect.value === '11') {
                monthSelect.value = '0';
                yearSelect.value = parseInt(yearSelect.value) + 1;
            } else {
                monthSelect.value = parseInt(monthSelect.value) + 1;
            }
            updateCalendar();
        });

        // Initialize calendar
        initCalendar();

        // Time picker functionality
        const timeInput = document.getElementById('timeInput');
        const timePickerPopup = document.getElementById('timePickerPopup');
        const timeOverlay = document.getElementById('timeOverlay');
        const hourInput = document.getElementById('hourInput');
        const minuteInput = document.getElementById('minuteInput');
        const ampmBtns = document.querySelectorAll('.ampm-btn');
        const selectedTimeSpan = document.getElementById('selectedTime');
        const hiddenTimeInput = document.getElementById('time');
        const cancelBtn = document.querySelector('.time-picker-btn.cancel');
        const okBtn = document.querySelector('.time-picker-btn.ok');

        // Initialize time picker elements to be hidden
        timePickerPopup.style.display = 'none';
        timeOverlay.style.display = 'none';

        // Get arrow buttons
        const hourUp = document.getElementById('hourUp');
        const hourDown = document.getElementById('hourDown');
        const minuteUp = document.getElementById('minuteUp');
        const minuteDown = document.getElementById('minuteDown');

        let selectedHour = '07';
        let selectedMinute = '00';
        let selectedAmPm = 'AM';

        function showTimePicker(e) {
            e.preventDefault(); // Prevent default behavior
            e.stopPropagation(); // Stop event bubbling
            timeOverlay.style.display = 'block';
            timePickerPopup.style.display = 'block';
        }

        function hideTimePicker() {
            timeOverlay.style.display = 'none';
            timePickerPopup.style.display = 'none';
        }

        // Show/hide time picker - only on timeInput click
        timeInput.addEventListener('click', showTimePicker);

        // Handle clicking overlay
        timeOverlay.addEventListener('click', (e) => {
            if (e.target === timeOverlay) {
                hideTimePicker();
            }
        });

        // Handle hour arrows
        hourUp.addEventListener('click', () => {
            let value = parseInt(selectedHour);
            value = value === 12 ? 1 : value + 1;
            selectedHour = value.toString().padStart(2, '0');
            hourInput.value = selectedHour;
        });

        hourDown.addEventListener('click', () => {
            let value = parseInt(selectedHour);
            value = value === 1 ? 12 : value - 1;
            selectedHour = value.toString().padStart(2, '0');
            hourInput.value = selectedHour;
        });

        // Handle minute arrows
        minuteUp.addEventListener('click', () => {
            let value = parseInt(selectedMinute);
            value = (value + 5) % 60;
            selectedMinute = value.toString().padStart(2, '0');
            minuteInput.value = selectedMinute;
        });

        minuteDown.addEventListener('click', () => {
            let value = parseInt(selectedMinute);
            value = value === 0 ? 55 : value - 5;
            selectedMinute = value.toString().padStart(2, '0');
            minuteInput.value = selectedMinute;
        });

        // Handle hour input
        hourInput.addEventListener('input', function(e) {
            let value = e.target.value;
            
            // Only allow numbers
            value = value.replace(/[^0-9]/g, '');
            
            // Limit to 2 digits and valid hour
            if (value.length > 0) {
                let numValue = parseInt(value);
                if (numValue > 12) {
                    value = '12';
                } else if (numValue === 0) {
                    value = '12';
                }
            }
            
            selectedHour = value;
            e.target.value = value;
        });

        // Handle minute input
        minuteInput.addEventListener('input', function(e) {
            let value = e.target.value;
            
            // Only allow numbers
            value = value.replace(/[^0-9]/g, '');
            
            // Limit to 2 digits and valid minute
            if (value.length > 0) {
                let numValue = parseInt(value);
                if (numValue > 59) {
                    value = '59';
                }
            }
            
            selectedMinute = value;
            e.target.value = value;
        });

        // Format on blur
        hourInput.addEventListener('blur', function() {
            if (selectedHour === '') {
                selectedHour = '12';
                hourInput.value = '12';
            } else {
                hourInput.value = selectedHour.padStart(2, '0');
            }
        });

        minuteInput.addEventListener('blur', function() {
            if (selectedMinute === '') {
                selectedMinute = '00';
                minuteInput.value = '00';
            } else {
                minuteInput.value = selectedMinute.padStart(2, '0');
            }
        });

        // Handle AM/PM selection
        ampmBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                ampmBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                selectedAmPm = btn.dataset.value;
            });
        });

        // Handle Cancel button
        cancelBtn.addEventListener('click', hideTimePicker);

        // Handle OK button
        okBtn.addEventListener('click', () => {
            // Convert to 24-hour format for the hidden input
            let hour24 = parseInt(selectedHour);
            if (selectedAmPm === 'PM' && hour24 !== 12) hour24 += 12;
            if (selectedAmPm === 'AM' && hour24 === 12) hour24 = 0;
            
            hiddenTimeInput.value = `${hour24.toString().padStart(2, '0')}:${selectedMinute}`;
            selectedTimeSpan.textContent = `${selectedHour}:${selectedMinute} ${selectedAmPm}`;
            hideTimePicker();
        });

        // Initialize inputs
        hourInput.value = selectedHour;
        minuteInput.value = selectedMinute;

        // Handle keyboard events
        document.addEventListener('keydown', (e) => {
            if (timePickerPopup.style.display !== 'block') return;

            if (e.key === 'Escape') {
                hideTimePicker();
            }
        });

        // Stop propagation of clicks inside the time picker popup
        timePickerPopup.addEventListener('click', (e) => {
            e.stopPropagation();
        });
    });

    // Add this new function
    function openReminder() {
        // start with savedReminders in temp so they show in modal
        tempReminders = [...savedReminders];
        reminderModal.style.display = "flex";
        renderReminders();
    }

    // Add this new function for showing popup messages
    function showPopupMessage(message, type = 'error') {
        const modal = document.createElement('div');
        modal.style.position = 'fixed';
        modal.style.top = '50%';
        modal.style.left = '50%';
        modal.style.transform = 'translate(-50%, -50%) scale(0.1)';
        modal.style.backgroundColor = 'white';
        modal.style.padding = '35px 25px';
        modal.style.borderRadius = '8px';
        modal.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
        modal.style.zIndex = '1000';
        modal.style.display = 'flex';
        modal.style.flexDirection = 'column';
        modal.style.alignItems = 'center';
        modal.style.gap = '25px';
        modal.style.width = '300px';
        modal.style.opacity = '0';
        modal.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';

        // Icon with animation
        const icon = document.createElement('div');
        const iconClass = type === 'error' ? 'fas fa-exclamation-circle' : 'fas fa-check-circle';
        const iconColor = type === 'error' ? '#ff0000' : '#28a745';
        icon.innerHTML = `<i class="${iconClass}" style="color: ${iconColor}; font-size: 45px; transform: scale(0); opacity: 0; transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s;"></i>`;
        
        // Message with animation
        const messageDiv = document.createElement('div');
        messageDiv.textContent = message;
        messageDiv.style.color = type === 'error' ? '#ff0000' : '#28a745';
        messageDiv.style.fontSize = '18px';
        messageDiv.style.textAlign = 'center';
        messageDiv.style.fontWeight = '500';
        messageDiv.style.lineHeight = '1.5';
        messageDiv.style.opacity = '0';
        messageDiv.style.transform = 'translateY(10px)';
        messageDiv.style.transition = 'all 0.5s ease 0.4s';

        modal.appendChild(icon);
        modal.appendChild(messageDiv);

        const overlay = document.createElement('div');
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.right = '0';
        overlay.style.bottom = '0';
        overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
        overlay.style.zIndex = '999';
        overlay.style.opacity = '0';
        overlay.style.transition = 'opacity 0.5s ease-in-out';

        document.body.appendChild(overlay);
        document.body.appendChild(modal);

        // Trigger animations
        requestAnimationFrame(() => {
            modal.style.transform = 'translate(-50%, -50%) scale(1)';
            modal.style.opacity = '1';
            overlay.style.opacity = '1';
            
            // Animate icon
            const iconElement = icon.querySelector('i');
            if (iconElement) {
                iconElement.style.transform = 'scale(1)';
                iconElement.style.opacity = '1';
            }
            
            // Animate message
            messageDiv.style.opacity = '1';
            messageDiv.style.transform = 'translateY(0)';
        });

        // Remove with animation
        setTimeout(() => {
            modal.style.transform = 'translate(-50%, -50%) scale(0.1)';
            modal.style.opacity = '0';
            overlay.style.opacity = '0';
            
            // Reverse icon animation
            const iconElement = icon.querySelector('i');
            if (iconElement) {
                iconElement.style.transform = 'scale(0)';
                iconElement.style.opacity = '0';
            }
            
            // Reverse message animation
            messageDiv.style.opacity = '0';
            messageDiv.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                if (overlay.parentNode) document.body.removeChild(overlay);
                if (modal.parentNode) document.body.removeChild(modal);
            }, 500);
        }, 2500);
    }
</script>

</body>
</html>
