<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <title>TaskPlus</title>
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "SF Pro Text", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        font-weight: 500; /* Medium */
    }
    body {
        background-color: #E0DDF2;
        min-height: 100vh;
        overflow: hidden;
    }
    header {
        position: fixed;
        top: 0; left: 0; right: 0;
        height: 75px;
        background: #ffffff;
        box-shadow: 0 5px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 16px;
        z-index: 20;
    }
    .action-panel {
        display: flex;
        gap: 10px;
    }
    .action-button {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        border: none;
        border-radius: 6px;
        background-color: #E0DDF2;
        color: #000;
        font-size: 16px;
        font-weight: 540;
        cursor: pointer;
        transition: 0.3s;
    }
    .action-button:hover {
        background-color: #E0DDF2;
        color: #4417DD;
    }
    .action-button svg {
        width: 16px;
        height: 16px;
    }
    .sidebar {
        position: fixed;
        top: 64px; left: 0;
        height: calc(100vh - 64px);
        width: 250px;
        background: #ffffff;
        box-shadow: 5px 0 4px rgba(0, 0, 0, 0.1);
        z-index: 10;
    }
    .sidebar nav {
        padding: 24px 16px;
    }
    .sidebar ul {
        list-style: none;
    }
    .sidebar li:not(:last-child) {
        margin-bottom: 16px;
    }
    .sidebar a {
        display: block;
        padding: 8px 16px;
        text-decoration: none;
        color: #000000;
        border-radius: 6px;
        transition: background 0.3s;
    }
    .sidebar a:hover {
        background-color: #E0DDF2;
        color: #4417DD;
    }
    h1 {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 16px;
        color: #1f2937;
    }
    p {
        margin-bottom: 24px;
        color: #4b5563;
    }
    .sidebar a:hover,
    .sidebar a.active {
        background-color: #E0DDF2;
        color: #4417DD;
    }
    .modal {
        position: fixed;
        inset: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 30;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .modal-content {
        background: #fff;
        width: 90%;
        max-width: 900px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
    }
    .modal-header {
        background-color: #E0DDF2;
        padding: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .modal-header h2 {
        font-size: 20px;
    }
    .close-button {
        background: transparent;
        border: none;
        font-size: 24px;
        cursor: pointer;
    }
    .modal-body {
        padding: 20px;
        flex: 1;
        overflow-y: auto;
    }
    .modal-footer {
        padding: 16px;
        background-color: #F9F9F9;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        border-top: 1px solid #ddd;
        margin-top: auto;
    }
    .form-btn {
        background-color: #4417DD;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
    }
    .form-btn.secondary {
        background-color: #ccc;
        color: #000;
    }
    .form-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
    }
    .form-group {
        display: flex;
        flex-direction: column;
    }
    .form-group.tall {
    grid-row: span 2;
    }
    .form-group.full {
        grid-column: span 2;
    }
   .form-group label {
        margin-bottom: 6px;
        font-size: 14px;
        color: #374151;
        text-align: left;
    }
    input, select, textarea {
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
    }
    textarea {
        resize: vertical;
    }
    .priority-options {
        display: flex;
        gap: 16px;
    }
    .priority-cards {
        display: flex;
        gap: 12px;
        height: 46px;
    }
    /* Each card */
    /* Default style for unselected cards */
.priority-card {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    border: 2px solid #ccc;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    opacity: 0.5;
    background-color: #fff;
}

/* Show icons and text properly */
.priority-card i {
    margin-right: 6px;
}

/* Hide radio button */
.priority-card input {
    display: none;
}

/* Highlight selected card */
.priority-card:has(input:checked) {
    opacity: 1;
    color: white;
}

/* Specific styles */
.priority-card.high:has(input:checked) {
    background-color: #f0dcdc;
    border-color: rgb(247, 58, 58);
}

.priority-card.medium:has(input:checked) {
    background-color: #faefe7; 
    border-color:rgb(255,127,35);
}

.priority-card.low:has(input:checked) {
    background-color: #e2f5e8;
    border-color: rgb(40,167,69);
}
.input-style {
  border: 1px solid #ccc;
  border-radius: 0.375rem;
  padding: 0.4rem 0.6rem;
  background-color: white;
}
.w-20 {
  width: 5rem;
}
.data-container {
    margin-top: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    max-height: calc(100vh - 140px);
    overflow-y: hidden;
    overflow-x: hidden;
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
}

.data-container:hover {
    overflow-y: auto;
    overflow-x: hidden;
}

.data-container::-webkit-scrollbar {
    width: 0 !important;
    display: none !important;
}

.data-container:hover::-webkit-scrollbar {
    width: 6px !important;
    display: block !important;
}

.data-container:hover::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.data-container:hover::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 3px;
}

.data-container:hover::-webkit-scrollbar-thumb:hover {
    background: #555;
}

.data-row {
    display: grid;
    grid-template-columns: 150px 150px 150px 200px 100px 150px 150px 150px 100px 100px 100px 150px;
    border-bottom: 1px solid #dee2e6;
    width: 100%;
    min-width: 100%;
    max-width: 100%;
}

.data-header {
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
}

.data-row {
    display: grid;
    grid-template-columns: 200px 200px 200px 250px 150px 200px 200px 200px 150px 150px 150px 200px;
    border-bottom: 1px solid #dee2e6;
    min-width: fit-content;
}

.data-cell {
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 4px;
    border-right: 1px solid #dee2e6;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 13px;
}

.data-cell:last-child {
    border-right: none;
}

.data-row:hover {
    background-color: #f8f9fa;
}

.no-data {
    padding: 40px;
    text-align: center;
    color: #666;
    font-size: 16px;
    background: white;
}

.action-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    justify-content: flex-end;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    background-color: #f0f0f0;
    color: #666;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.action-btn:hover {
    background-color: #e0e0e0;
}

.action-btn i {
    font-size: 16px;
}

.data-header .data-row {
    font-weight: 600;
}

.data-container .data-row:not(.data-header .data-row):not(.filter-row .data-row) {
    font-weight: 400;
    color: #666;
    font-size: 13px;
}

.data-container .data-row:not(.data-header .data-row):not(.filter-row .data-row) .priority-tag {
    opacity: 0.85;
}

.data-header {
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
}

.data-header .data-cell {
    border-right: 1px solid #dee2e6;
    font-size: 15px;
    font-weight: 600;
}

.filter-row .data-cell {
    padding: 8px 1px;
    font-size: 14px;
}

.filter-input {
    width: 100%;
    padding: 4px 8px 4px 32px;
    border: none;
    border-radius: 4px;
    font-size: 15px;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="%23999" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>') no-repeat 12px center;
    background-size: 14px;
    transition: all 0.2s ease;
    margin: 0;
}

.filter-input:focus {
    outline: none;
    background-color: rgba(224, 221, 242, 0.1);
}

input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #E0DDF2;
    box-shadow: 0 0 0 3px rgba(224, 221, 242, 0.25);
}

.filter-input::placeholder {
    color: #999;
    font-size: 15px;
}

.sort-icon {
    color: #999;
    cursor: pointer;
}

.sort-icon:hover {
    color: #333;
}

.priority-tag {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.priority-high {
    background-color: #fde8e8;
    color: #e53e3e;
}

.priority-medium {
    background-color: #faefe7;
    color: #ff7f23;
}

.priority-low {
    background-color: #e2f5e8;
    color: #28a745;
}

.task-count {
    position: fixed;
    bottom: 20px;
    left: 270px;
    right: 20px;
    padding: 10px;
    background: white;
    border-top: 1px solid #dee2e6;
    color: #666;
    font-size: 14px;
    z-index: 10;
}

#taskContainer {
    margin: 90px 20px 20px 270px;
    height: calc(100vh - 110px);
    overflow: auto;
}

.data-container {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    height: 100%;
    display: flex;
    flex-direction: column;
    min-width: fit-content;
}

.data-content {
    flex: 1;
    overflow: hidden;
    position: relative;
}

.data-row {
    display: grid;
    grid-template-columns: 200px 200px 200px 250px 150px 200px 200px 200px 150px 150px 150px 200px;
    border-bottom: 1px solid #dee2e6;
    min-width: fit-content;
}

.data-cell {
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 4px;
    border-right: 1px solid #dee2e6;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: 13px;
}

.filter-row .data-cell {
    padding: 8px 1px;
}

.data-header {
    position: sticky;
    top: 0;
    background: #f8f9fa;
    z-index: 1;
}

.filter-row {
    position: sticky;
    top: 43px;
    background: white;
    z-index: 1;
}

.no-data {
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    padding: 20px;
    text-align: center;
    color: #666;
    font-size: 16px;
}

.data-content:hover {
    overflow-y: auto;
}

/* Hide scrollbar for Chrome, Safari and Opera */
.data-content::-webkit-scrollbar {
    width: 8px;
}

.data-content::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.data-content::-webkit-scrollbar-thumb {
    background: #E0DDF2;
    border-radius: 4px;
}

.data-content::-webkit-scrollbar-thumb:hover {
    background: #4417DD;
}

.data-content::-webkit-scrollbar-corner {
    background: #f1f1f1;
}

/* Hide scrollbar for IE, Edge and Firefox */
.data-content {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}

.data-content:hover {
    -ms-overflow-style: auto;  /* IE and Edge */
    scrollbar-width: thin;  /* Firefox */
}

/* Add this CSS for selected row */
.data-row.selected {
    background-color: #E0DDF2;
}

.form-group input[type="date"] {
    position: relative;
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    background-color: white;
    color: #374151;
    font-size: 14px;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23374151' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cline x1='16' y1='2' x2='16' y2='6'%3E%3C/line%3E%3Cline x1='8' y1='2' x2='8' y2='6'%3E%3C/line%3E%3Cline x1='3' y1='10' x2='21' y2='10'%3E%3C/line%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 40px;
}

.form-group input[type="date"]::-webkit-calendar-picker-indicator {
    opacity: 0;
    position: absolute;
    right: 0;
    top: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.form-group input[type="date"]:focus {
    border-color: #E0DDF2;
    box-shadow: 0 0 0 3px rgba(224, 221, 242, 0.25);
    outline: none;
}

.form-group input[type="date"]::-webkit-datetime-edit {
    padding: 0;
}

.form-group input[type="date"]::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
}

.form-group input[type="date"]::-webkit-datetime-edit-text {
    padding: 0 2px;
}

.form-group input[type="date"]::-webkit-datetime-edit-month-field,
.form-group input[type="date"]::-webkit-datetime-edit-day-field,
.form-group input[type="date"]::-webkit-datetime-edit-year-field {
    padding: 0;
}

.calendar-wrapper,
.calendar-popup,
.calendar-popup.show,
.calendar-header,
.calendar-nav,
.calendar-nav button,
.calendar-title,
.calendar-grid,
.calendar-weekday,
.calendar-day,
.calendar-day.today,
.calendar-day.selected,
.calendar-day.other-month,
.month-year-selector,
.month-year-selector select {
    /* Remove these styles */
}

</style>
</head>
<body>
    <header>
        <div class="header-left">
           <img src="https://taskplus.in/assets/img/logo/logo.png" alt="Company Logo" style="max-width: 150px; margin-left: 10px;"/>
        </div>
        <div class="action-panel">
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>Add</button>
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>Modify</button>
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>Delete</button>
            <button class="action-button"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>Close</button>
        </div>
    </header>

    <div class="sidebar" id="sidebar">
        <nav>
            <ul style="text-align: left;"><li><a href="#" class="active"><b>Task Setup</b></a></li></ul>
        </nav>
    </div>
    <!-- Modal -->
<div class="modal" id="taskFormModal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 10px;">
              <img src="https://taskplus.in/assets/img/webpage/logo/logoPopup.png" alt="Company Logo" style="height: 35px;" />
              <h2>Task Setup</h2>
            </div>
        </div>
        <div class="modal-body">
            <div class="form-grid">
                <div class="form-group full">
                    <label>Task Type</label>
                    <select id="taskType" style="cursor: pointer;"><option>Select</option></select>
                </div>
      
                <div class="form-group">
                    <label>Create Task When</label>
                    <select id="executionType" style="cursor: pointer;"><option>Select</option></select>
                </div>

                <div class="form-group">
                    <label>Create On</label>
                    <input type="date" id="dayOfMonth" style="cursor: text;" />
                </div>
      
                <div class="form-group">
                    <label>Created By</label>
                    <select id="createdBy" style="cursor: pointer;"><option>Select</option></select>
                </div>

                <div class="form-group">
                    <label>Allocate To</label>
                    <select id="assignTo" style="cursor: pointer;"><option>Select</option></select>
                </div>
      
                <div class="form-group tall">
                    <label>Task Description</label>
                    <textarea id="description" rows="6"></textarea>
                </div>

                <div class="form-group">
                    <label>Category</label>
                    <select id="category" style="cursor: pointer;"><option>Select</option></select>
                </div>

                <div class="form-group">
                    <label>Due After</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="dueAfterValue" style="width: 300px;" />
                        <select id="dueAfterUnit" style="width: 111px; cursor: pointer;"><option>Days</option></select>
                    </div>
                </div>
      
                <div class="form-group">
                    <label>Priority</label>
                    <div class="priority-cards">
                        <label class="priority-card high">
                            <input type="radio" name="priority" value="High" checked />
                            <i class="bi bi-arrow-up" style="color: #000000;"></i>
                            <span style="color: #000000;">High</span>
                        </label>
                        <label class="priority-card medium">
                            <input type="radio" name="priority" value="Medium" />
                            <i class="bi bi-arrow-up" style="color: #000000;"></i>
                            <span style="color: #000000;">Medium</span>
                        </label>
                        <label class="priority-card low">
                            <input type="radio" name="priority" value="Low" />
                            <i class="bi bi-arrow-down" style="color: #000000;"></i>
                            <span style="color: #000000;">Low</span>
                        </label>
                    </div>              
                </div>

                <div class="form-group">
                    <label>Time</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="time" id="time" style="flex: 1; width: 300px;" />
                        <button class="form-btn secondary" style="width: 111px; height: 38px; color: #4417DD; background-color: #E0DDF2; font-size: 13.5px;"><i class="fa fa-bell" style="margin-right: 7px;"></i>Reminder</button>
                    </div>
                </div>

                <div class="form-group full">
                    <label>Complete Task When</label>
                    <select id="completeTaskWhen" style="cursor: pointer;"><option>Select</option></select>
                </div>

            </div>
        </div>
        <div class="modal-footer">
            <button class="form-btn" onclick="addTask()" style="height: 40px; width: 90px; font-size: 15px;">Save</button>
            <button class="form-btn secondary" onclick="closeModal()" style="width: 90px; font-size: 15px;">Close</button>
        </div>
    </div>
</div>

<!-- Reminder Modal -->
<div class="modal" id="reminderModal" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 10px;">
                <img src="https://taskplus.in/assets/img/webpage/logo/logoPopup.png" alt="Company Logo" style="height: 35px;" />
                <h2>Add Reminder</h2>
            </div>
        </div>
        <div class="modal-body">
            <div style="display: flex; gap: 10px; margin-bottom: 16px;">
                <select id="reminderType" style="flex: 1; padding: 6px; border: 1px solid #ccc; border-radius: 6px;">
                    <option>Email</option>
                    <option>Notification</option>
                </select>
                <input id="reminderValue" type="number" value="0" style="width: 80px; border: 1px solid #ccc; border-radius: 6px; padding: 6px;" />
                <select id="reminderUnit" style="width: 111px; border: 1px solid #ccc; border-radius: 6px; padding: 6px;">
                    <option>Minutes</option>
                    <option>Hours</option>
                    <option>Days</option>
                </select>
                <button class="form-btn" style="height: 38px; background-color: #4417DD; color: white; border-radius: 6px; width: 38px; padding: 0; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; line-height: 0;" onclick="addReminder()">+</button>
            </div>

            <div style="height: 1px; background-color: #ccc; margin: 16px 0;"></div>

            <div id="reminderList" style="max-height: 200px; overflow-y: auto; padding: 10px 0; display: flex; flex-direction: column; gap: 10px;">
                <div style="text-align: center; color: #999;" id="noReminderText">No data</div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="form-btn primary" style="height: 42px;" onclick="saveReminders()">Save Reminder</button>
            <button class="form-btn secondary" onclick="closeReminder()">Close</button>
        </div>
    </div>
</div>

<!-- Task Container -->
<div id="taskContainer" style="margin: 90px 20px 20px 270px;"></div>

<!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
<script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
<script>
    const modal = document.getElementById("taskFormModal");
    const addButton = document.querySelector(".action-button");
    const reminderBtn = document.querySelector(".form-btn.secondary");
    const reminderModal = document.getElementById("reminderModal");
    const reminderList = document.getElementById("reminderList");

    let tempReminders = [];
    let savedReminders = [];
    let taskData = [];
    let selectedTaskIndex = -1;

    // Sample data for dropdowns
    const taskTypes = ['Regular Task', 'Urgent Task', 'Meeting', 'Follow-up'];
    const executionTypes = ['Immediately', 'On Specific Date', 'Weekly', 'Monthly'];
    const users = ['John Doe', 'Jane Smith', 'Mike Johnson', 'Sarah Wilson'];
    const categories = ['Development', 'Design', 'Marketing', 'Sales', 'Support'];

    // Populate dropdowns on page load
    window.onload = function() {
        populateDropdown('taskType', taskTypes);
        populateDropdown('executionType', executionTypes);
        populateDropdown('createdBy', users);
        populateDropdown('assignTo', users);
        populateDropdown('category', categories);
        populateDropdown('completeTaskWhen', ['On Date', 'After Days', 'Never']);
        populateDropdown('dueAfterUnit', ['Days', 'Weeks', 'Months']);
        
        // Initialize task container with "No data" message
        renderTasks();
    };

    function populateDropdown(id, options) {
        const select = document.getElementById(id);
        select.innerHTML = '<option value="">Select</option>';
        options.forEach(option => {
            const optionElement = document.createElement('option');
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });
    }

    // Open task form modal
    addButton.addEventListener("click", () => {
        modal.style.display = "flex";
    });

    // Close task form modal
    function closeModal() {
        modal.style.display = "none";
    }

    // Open reminder modal
    reminderBtn.addEventListener("click", () => {
        // start with savedReminders in temp so they show in modal
        tempReminders = [...savedReminders];
        reminderModal.style.display = "flex";
        renderReminders();
    });

    // Close reminder modal and discard changes
    function closeReminder() {
        tempReminders = [];
        reminderModal.style.display = "none";
    }

    // Save reminders permanently
    function saveReminders() {
        savedReminders = [...tempReminders];
        reminderModal.style.display = "none";
    }

    // Add reminder
    function addReminder() {
        const type = document.getElementById("reminderType").value;
        const value = document.getElementById("reminderValue").value;
        const unit = document.getElementById("reminderUnit").value;

        if (value === "" || isNaN(value) || value < 0) {
            alert("Please enter a valid number for time.");
            return;
        }

        // Check for duplicates
        const isDuplicate = tempReminders.some(reminder => 
            reminder.type === type && 
            reminder.value === value && 
            reminder.unit === unit
        );

        if (isDuplicate) {
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '50%';
            modal.style.left = '50%';
            modal.style.transform = 'translate(-50%, -50%) scale(0.1)';
            modal.style.backgroundColor = 'white';
            modal.style.padding = '35px 25px';
            modal.style.borderRadius = '8px';
            modal.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
            modal.style.zIndex = '1000';
            modal.style.display = 'flex';
            modal.style.flexDirection = 'column';
            modal.style.alignItems = 'center';
            modal.style.gap = '25px';
            modal.style.width = '300px';
            modal.style.opacity = '0';
            modal.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';

            // Exclamation icon with animation
            const icon = document.createElement('div');
            icon.innerHTML = '<i class="fa-solid fa-circle-exclamation" style="color: #ff0000; font-size: 45px; transform: scale(0); opacity: 0; transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s;"></i>';
            
            // Message with animation
            const message = document.createElement('div');
            message.textContent = 'Reminder with same values already exists, Please change values to add new reminder.';
            message.style.color = '#ff0000';
            message.style.fontSize = '18px';
            message.style.textAlign = 'center';
            message.style.fontWeight = '500';
            message.style.lineHeight = '1.5';
            message.style.opacity = '0';
            message.style.transform = 'translateY(10px)';
            message.style.transition = 'all 0.5s ease 0.4s';

            modal.appendChild(icon);
            modal.appendChild(message);

            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.right = '0';
            overlay.style.bottom = '0';
            overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
            overlay.style.zIndex = '999';
            overlay.style.opacity = '0';
            overlay.style.transition = 'opacity 0.5s ease-in-out';

            document.body.appendChild(overlay);
            document.body.appendChild(modal);

            // Trigger animations
            requestAnimationFrame(() => {
                modal.style.transform = 'translate(-50%, -50%) scale(1)';
                modal.style.opacity = '1';
                overlay.style.opacity = '1';
                
                // Animate icon
                const iconElement = icon.querySelector('i');
                iconElement.style.transform = 'scale(1)';
                iconElement.style.opacity = '1';
                
                // Animate message
                message.style.opacity = '1';
                message.style.transform = 'translateY(0)';
            });

            // Remove with animation
            setTimeout(() => {
                modal.style.transform = 'translate(-50%, -50%) scale(0.1)';
                modal.style.opacity = '0';
                overlay.style.opacity = '0';
                
                // Reverse icon animation
                const iconElement = icon.querySelector('i');
                iconElement.style.transform = 'scale(0)';
                iconElement.style.opacity = '0';
                
                // Reverse message animation
                message.style.opacity = '0';
                message.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    document.body.removeChild(overlay);
                    document.body.removeChild(modal);
                }, 500);
            }, 2500);
            return;
        }

        tempReminders.push({
            type: type,
            value: value,
            unit: unit
        });
        renderReminders();
    }

    // Render reminders in modal
    function renderReminders() {
        reminderList.innerHTML = "";

        if (tempReminders.length === 0) {
            const noData = document.createElement("div");
            noData.textContent = "No data";
            noData.style.color = "#999";
            noData.style.textAlign = "center";
            reminderList.appendChild(noData);
            return;
        }

        tempReminders.forEach(reminder => {
            const item = document.createElement("div");
            item.style.display = "flex";
            item.style.gap = "10px";
            item.style.alignItems = "center";
            item.style.padding = "0";
            item.style.backgroundColor = "#ffffff";

            // Type box (Email/Notification)
            const typeSelect = document.createElement("select");
            typeSelect.style.flex = "1";
            typeSelect.style.padding = "6px";
            typeSelect.style.border = "1px solid #ccc";
            typeSelect.style.borderRadius = "6px";
            typeSelect.style.width = "300px";
            typeSelect.disabled = true;
            typeSelect.style.appearance = "none";
            typeSelect.style.backgroundColor = "white";
            typeSelect.style.color = "#000000";
            typeSelect.style.cursor = "default";
            typeSelect.style.opacity = "1";
            const emailOption = document.createElement("option");
            emailOption.text = reminder.type;
            typeSelect.add(emailOption);

            // Value box (Number)
            const valueInput = document.createElement("input");
            valueInput.type = "number";
            valueInput.value = reminder.value;
            valueInput.style.width = "80px";
            valueInput.style.padding = "6px";
            valueInput.style.border = "1px solid #ccc";
            valueInput.style.borderRadius = "6px";
            valueInput.disabled = true;
            valueInput.style.backgroundColor = "white";
            valueInput.style.color = "#000000";
            valueInput.style.cursor = "default";
            valueInput.style.opacity = "1";

            // Unit box (Minutes/Hours/Days)
            const unitSelect = document.createElement("select");
            unitSelect.style.width = "111px";
            unitSelect.style.padding = "6px";
            unitSelect.style.border = "1px solid #ccc";
            unitSelect.style.borderRadius = "6px";
            unitSelect.disabled = true;
            unitSelect.style.appearance = "none";
            unitSelect.style.backgroundColor = "white";
            unitSelect.style.color = "#000000";
            unitSelect.style.cursor = "default";
            unitSelect.style.opacity = "1";
            const unitOption = document.createElement("option");
            unitOption.text = reminder.unit;
            unitSelect.add(unitOption);

            // Delete button
            const deleteButton = document.createElement("button");
            deleteButton.innerHTML = '<i class="fa-solid fa-xmark" style="color: rgb(240, 36, 36); font-size: 18px;"></i>';
            deleteButton.style.background = "none";
            deleteButton.style.border = "none";
            deleteButton.style.cursor = "pointer";
            deleteButton.style.padding = "6px 12px";
            deleteButton.style.height = "38px";
            deleteButton.style.width = "38px";
            deleteButton.style.display = "flex";
            deleteButton.style.alignItems = "center";
            deleteButton.style.justifyContent = "center";
            deleteButton.style.opacity = "1";
            deleteButton.onclick = function() {
                const index = tempReminders.indexOf(reminder);
                if (index > -1) {
                    tempReminders.splice(index, 1);
                    renderReminders();
                }
            };

            item.appendChild(typeSelect);
            item.appendChild(valueInput);
            item.appendChild(unitSelect);
            item.appendChild(deleteButton);
            reminderList.appendChild(item);
        });
    }
    
    function addTask() {
        const task = {
            taskType: document.getElementById('taskType').value,
            executionType: document.getElementById('executionType').value,
            dayOfMonth: document.getElementById('dayOfMonth').value,
            createdBy: document.getElementById('createdBy').value,
            assignTo: document.getElementById('assignTo').value,
            description: document.getElementById('description').value,
            category: document.getElementById('category').value,
            dueAfter: {
                value: document.getElementById('dueAfterValue').value,
                unit: document.getElementById('dueAfterUnit').value
            },
            priority: document.querySelector('input[name="priority"]:checked').value,
            time: document.getElementById('time').value,
            completeTaskWhen: document.getElementById('completeTaskWhen').value,
            reminders: [...savedReminders]
        };

        // Validate required fields
        if (!task.taskType || !task.executionType || !task.createdBy || !task.assignTo) {
            alert('Please fill in all required fields');
            return;
        }

        if (selectedTaskIndex === -1) {
            // Add new task
            taskData.push(task);
        } else {
            // Update existing task
            taskData[selectedTaskIndex] = task;
            selectedTaskIndex = -1;
        }
        
        // Render tasks
        renderTasks();
        
        // Close modal and reset form
        closeModal();
        resetForm();
    }

    function formatDate(dateString) {
        if (!dateString) return '';
        const date = new Date(dateString);
        if (isNaN(date.getTime())) return '';
        
        const day = date.getDate().toString().padStart(2, '0');
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const year = date.getFullYear();
        
        return `${day}/${month}/${year}`;
    }

    function renderTasks() {
        const container = document.getElementById('taskContainer');
        let html = `<div class="data-container">
            <div class="data-header">
                <div class="data-row">
                    <div class="data-cell">Task Type</div>
                    <div class="data-cell">Execution Type</div>
                    <div class="data-cell">Created By</div>
                    <div class="data-cell">Task Description</div>
                    <div class="data-cell">Priority</div>
                    <div class="data-cell">Assign To</div>
                    <div class="data-cell">Category</div>
                    <div class="data-cell">Day Of Month</div>
                    <div class="data-cell">Time</div>
                    <div class="data-cell">Due After</div>
                    <div class="data-cell">Due Unit</div>
                    <div class="data-cell">Completion Criteria</div>
                </div>
            </div>
            <div class="filter-row">
                <div class="data-row">
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Task Type"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Execution Type"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Created By"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Task Description"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Priority"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Assign To"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Category"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Day Of Month"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Time"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Due After"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Due Unit"></div>
                    <div class="data-cell"><input type="text" class="filter-input" placeholder="Completion Criteria"></div>
                </div>
            </div>
            <div class="data-content">`;

        if (!taskData || taskData.length === 0) {
            html += '<div class="no-data">No data</div>';
        } else {
            taskData.forEach((task, index) => {
                html += `
                    <div class="data-row ${selectedTaskIndex === index ? 'selected' : ''}" data-index="${index}">
                        <div class="data-cell">${task.taskType || ''}</div>
                        <div class="data-cell">${task.executionType || ''}</div>
                        <div class="data-cell">${task.createdBy || ''}</div>
                        <div class="data-cell">${task.description || ''}</div>
                        <div class="data-cell">
                            <span class="priority-tag priority-${task.priority?.toLowerCase()}">${task.priority || ''}</span>
                        </div>
                        <div class="data-cell">${task.assignTo || ''}</div>
                        <div class="data-cell">${task.category || ''}</div>
                        <div class="data-cell">${formatDate(task.dayOfMonth)}</div>
                        <div class="data-cell">${task.time || ''}</div>
                        <div class="data-cell">${task.dueAfter?.value || ''}</div>
                        <div class="data-cell">${task.dueAfter?.unit || 'Days'}</div>
                        <div class="data-cell">${task.completeTaskWhen || ''}</div>
                    </div>
                `;
            });
        }

        html += `</div></div>`;
        
        container.innerHTML = html;

        // Add click handlers for row selection
        document.querySelectorAll('.data-row:not(.data-header .data-row):not(.filter-row .data-row)').forEach(row => {
            row.addEventListener('click', () => {
                document.querySelectorAll('.data-row').forEach(r => r.classList.remove('selected'));
                row.classList.add('selected');
                selectedTaskIndex = parseInt(row.dataset.index);
            });
        });

        // Add filter functionality
        document.querySelectorAll('.filter-input').forEach((input, index) => {
            input.addEventListener('input', (e) => {
                filterTasks();
            });
        });
    }

    function mapColumnToProperty(column) {
        const map = {
            'task type': 'taskType',
            'execution type': 'executionType',
            'created by': 'createdBy',
            'task description': 'description',
            'priority': 'priority',
            'assign to': 'assignTo',
            'category': 'category',
            'day of month': 'dayOfMonth',
            'time': 'time'
        };
        return map[column.toLowerCase()] || column.toLowerCase();
    }

    function filterTasks() {
        const filters = Array.from(document.querySelectorAll('.filter-input')).map(input => ({
            value: input.value.toLowerCase(),
            column: input.placeholder.toLowerCase()
        }));

        const filteredData = taskData.filter(task => {
            return filters.every(filter => {
                let value = task[mapColumnToProperty(filter.column)];
                
                // Handle date formatting for dayOfMonth
                if (filter.column === 'day of month' && value) {
                    value = formatDate(value);
                }
                
                // Convert to string and handle null/undefined
                value = (value || '').toString().toLowerCase();
                
                // Check if value starts with filter (case-insensitive)
                return value.startsWith(filter.value);
            });
        });

        renderFilteredTasks(filteredData);
    }

    function renderFilteredTasks(filteredData) {
        const container = document.querySelector('.data-content');
        if (!container) return;

        let html = '';
        if (filteredData.length === 0) {
            html = '<div class="no-data">No data</div>';
        } else {
            filteredData.forEach(task => {
                html += `
                    <div class="data-row">
                        <div class="data-cell">${task.taskType || ''}</div>
                        <div class="data-cell">${task.executionType || ''}</div>
                        <div class="data-cell">${task.createdBy || ''}</div>
                        <div class="data-cell">${task.description || ''}</div>
                        <div class="data-cell">
                            <span class="priority-tag priority-${task.priority?.toLowerCase()}">${task.priority || ''}</span>
                        </div>
                        <div class="data-cell">${task.assignTo || ''}</div>
                        <div class="data-cell">${task.category || ''}</div>
                        <div class="data-cell">${formatDate(task.dayOfMonth)}</div>
                        <div class="data-cell">${task.time || ''}</div>
                        <div class="data-cell">${task.dueAfter?.value || ''}</div>
                        <div class="data-cell">${task.dueAfter?.unit || 'Days'}</div>
                        <div class="data-cell">${task.completeTaskWhen || ''}</div>
                    </div>
                `;
            });
        }
        container.innerHTML = html;
    }

    function resetForm() {
        document.getElementById('taskType').value = '';
        document.getElementById('executionType').value = '';
        document.getElementById('dayOfMonth').value = '';
        document.getElementById('createdBy').value = '';
        document.getElementById('assignTo').value = '';
        document.getElementById('description').value = '';
        document.getElementById('category').value = '';
        document.getElementById('dueAfterValue').value = '';
        document.getElementById('dueAfterUnit').value = 'Days';
        document.getElementById('time').value = '';
        document.getElementById('completeTaskWhen').value = '';
        document.querySelector('input[name="priority"][value="High"]').checked = true;
        savedReminders = [];
        tempReminders = [];
    }

    // Update the Modify button click handler
    document.querySelectorAll('.action-button')[1].addEventListener("click", () => {
        if (selectedTaskIndex === -1) {
            alert('Please select a task to modify');
            return;
        }
        const task = taskData[selectedTaskIndex];
        fillFormWithTask(task);
        modal.style.display = "flex";
    });

    // Update the Delete button click handler
    document.querySelectorAll('.action-button')[2].addEventListener("click", () => {
        if (selectedTaskIndex === -1) {
            alert('Please select a task to delete');
            return;
        }
        
        // Show confirmation dialog
        if (confirm('Are you sure you want to delete this task?')) {
            // Remove the selected task
            taskData.splice(selectedTaskIndex, 1);
            selectedTaskIndex = -1;
            
            // Re-render the tasks
            renderTasks();
        }
    });

    // Add this function to fill the form with task data
    function fillFormWithTask(task) {
        document.getElementById('taskType').value = task.taskType;
        document.getElementById('executionType').value = task.executionType;
        document.getElementById('dayOfMonth').value = task.dayOfMonth;
        document.getElementById('createdBy').value = task.createdBy;
        document.getElementById('assignTo').value = task.assignTo;
        document.getElementById('description').value = task.description;
        document.getElementById('category').value = task.category;
        document.getElementById('dueAfterValue').value = task.dueAfter?.value || '';
        document.getElementById('dueAfterUnit').value = task.dueAfter?.unit || 'Days';
        document.querySelector(`input[name="priority"][value="${task.priority}"]`).checked = true;
        document.getElementById('time').value = task.time;
        document.getElementById('completeTaskWhen').value = task.completeTaskWhen;
        savedReminders = [...task.reminders];
    }
</script>

</body>
</html>
